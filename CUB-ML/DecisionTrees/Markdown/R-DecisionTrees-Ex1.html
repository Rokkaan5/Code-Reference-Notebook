<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Decison Trees - Example1 (R)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="R-DecisionTrees-Ex1_files/libs/clipboard/clipboard.min.js"></script>
<script src="R-DecisionTrees-Ex1_files/libs/quarto-html/quarto.js"></script>
<script src="R-DecisionTrees-Ex1_files/libs/quarto-html/popper.min.js"></script>
<script src="R-DecisionTrees-Ex1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R-DecisionTrees-Ex1_files/libs/quarto-html/anchor.min.js"></script>
<link href="R-DecisionTrees-Ex1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R-DecisionTrees-Ex1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R-DecisionTrees-Ex1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R-DecisionTrees-Ex1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R-DecisionTrees-Ex1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#decision-tree-tutorial---gates" id="toc-decision-tree-tutorial---gates" class="nav-link active" data-scroll-target="#decision-tree-tutorial---gates">Decision Tree Tutorial - Gates</a>
  <ul class="collapse">
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries">LIBRARIES</a></li>
  <li><a href="#read-in-the-dataset-you-want-to-work-with" id="toc-read-in-the-dataset-you-want-to-work-with" class="nav-link" data-scroll-target="#read-in-the-dataset-you-want-to-work-with">Read in the dataset you want to work with</a></li>
  </ul></li>
  <li><a href="#lets-start-with-the-record-dataset" id="toc-lets-start-with-the-record-dataset" class="nav-link" data-scroll-target="#lets-start-with-the-record-dataset">Let’s start with the record dataset</a>
  <ul class="collapse">
  <li><a href="#simple-tables" id="toc-simple-tables" class="nav-link" data-scroll-target="#simple-tables">Simple tables</a></li>
  <li><a href="#remove-unwanted-columns" id="toc-remove-unwanted-columns" class="nav-link" data-scroll-target="#remove-unwanted-columns">Remove unwanted columns</a></li>
  <li><a href="#training-and-testing-data" id="toc-training-and-testing-data" class="nav-link" data-scroll-target="#training-and-testing-data">Training and Testing Data</a></li>
  <li><a href="#make-sure-your-training-and-testing-datasets-are-balanced" id="toc-make-sure-your-training-and-testing-datasets-are-balanced" class="nav-link" data-scroll-target="#make-sure-your-training-and-testing-datasets-are-balanced">Make sure your Training and Testing datasets are BALANCED</a></li>
  </ul></li>
  <li><a href="#decision-trees" id="toc-decision-trees" class="nav-link" data-scroll-target="#decision-trees">Decision Trees</a></li>
  <li><a href="#tree-1" id="toc-tree-1" class="nav-link" data-scroll-target="#tree-1">Tree 1</a></li>
  <li><a href="#tree-2-with-cp" id="toc-tree-2-with-cp" class="nav-link" data-scroll-target="#tree-2-with-cp">Tree 2 (with <code>cp</code>)</a>
  <ul class="collapse">
  <li><a href="#cp-plot" id="toc-cp-plot" class="nav-link" data-scroll-target="#cp-plot">cp plot</a></li>
  </ul></li>
  <li><a href="#tree-3" id="toc-tree-3" class="nav-link" data-scroll-target="#tree-3">Tree 3</a></li>
  <li><a href="#tree-4-less-data" id="toc-tree-4-less-data" class="nav-link" data-scroll-target="#tree-4-less-data">Tree 4 (less data)</a></li>
  <li><a href="#extra-notes-about-the-outputsummary" id="toc-extra-notes-about-the-outputsummary" class="nav-link" data-scroll-target="#extra-notes-about-the-outputsummary">Extra notes about the output/summary</a>
  <ul class="collapse">
  <li><a href="#variable-importance" id="toc-variable-importance" class="nav-link" data-scroll-target="#variable-importance">Variable importance</a></li>
  </ul></li>
  <li><a href="#predict-the-testset-using-all-4-trees--" id="toc-predict-the-testset-using-all-4-trees--" class="nav-link" data-scroll-target="#predict-the-testset-using-all-4-trees--">Predict the Testset using all 4 trees -</a>
  <ul class="collapse">
  <li><a href="#confusion-matrix" id="toc-confusion-matrix" class="nav-link" data-scroll-target="#confusion-matrix">Confusion Matrix</a></li>
  <li><a href="#vis" id="toc-vis" class="nav-link" data-scroll-target="#vis">VIS</a></li>
  <li><a href="#dt2" id="toc-dt2" class="nav-link" data-scroll-target="#dt2">DT2</a></li>
  <li><a href="#another-way-to-make-a-confusion-matrix" id="toc-another-way-to-make-a-confusion-matrix" class="nav-link" data-scroll-target="#another-way-to-make-a-confusion-matrix">ANother way to make a confusion matrix</a></li>
  <li><a href="#dt3" id="toc-dt3" class="nav-link" data-scroll-target="#dt3">DT3</a></li>
  <li><a href="#dt4" id="toc-dt4" class="nav-link" data-scroll-target="#dt4">DT4</a></li>
  </ul></li>
  <li><a href="#notes-on-cross-validation" id="toc-notes-on-cross-validation" class="nav-link" data-scroll-target="#notes-on-cross-validation">NOTES (on cross-validation):</a>
  <ul class="collapse">
  <li><a href="#read-more-about-cross-validation" id="toc-read-more-about-cross-validation" class="nav-link" data-scroll-target="#read-more-about-cross-validation">READ MORE about cross-validation:</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Decison Trees - Example1 (R)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="decision-tree-tutorial---gates" class="level1">
<h1>Decision Tree Tutorial - Gates</h1>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<p><a href="https://drive.google.com/file/d/1wxcPBcYHUFh7gPSC0ApPSnQZ6VRUe-C3/view?usp=sharing" class="uri">https://drive.google.com/file/d/1wxcPBcYHUFh7gPSC0ApPSnQZ6VRUe-C3/view?usp=sharing</a></p>
</section>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries">LIBRARIES</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)   <span class="do">## FOR Decision Trees</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rattle)  <span class="do">## FOR Decision Tree Vis</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Cairo)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(network)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">##If you install from the source....</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(NOAWT=TRUE)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">## ONCE: install.packages("wordcloud")</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="do">## ONCE: install.packages("tm")</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(slam)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">## ONCE: install.packages("quanteda")</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Note - this includes SnowballC</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#library(SnowballC)</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(proxy)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="do">## ONCE: if needed:  install.packages("stringr")</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="do">## ONCE: install.packages("textmineR")</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textmineR)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">#library(lsa)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-in-the-dataset-you-want-to-work-with" class="level2">
<h2 class="anchored" data-anchor-id="read-in-the-dataset-you-want-to-work-with">Read in the dataset you want to work with</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">dirname</span>(rstudioapi<span class="sc">::</span><span class="fu">getActiveDocumentContext</span>()<span class="sc">$</span>path))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># JK note: in this case I set the wd to the current file source location</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>RecordDatasetName<span class="ot">=</span><span class="st">"../../data_files/Labeled_ThreeClasses_Mammals_Fish_Reptiles3.csv"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>RecordDF_A<span class="ot">&lt;-</span><span class="fu">read.csv</span>(RecordDatasetName, <span class="at">stringsAsFactors=</span><span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(RecordDF_A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  label feathers limbs livebirth canfly liveswater blood
1 chicken   BIRD      yes     2        no    yes         no  warm
2  salmon   FISH       no     0        no     no        yes  cold
3   whale MAMMAL       no     4       yes     no        yes  warm
4     bat MAMMAL       no     4       yes    yes         no  warm
5   goose   BIRD      yes     2        no    yes         no  warm
6  pigeon   BIRD      yes     2        no    yes         no  warm</code></pre>
</div>
</div>
</section>
</section>
<section id="lets-start-with-the-record-dataset" class="level1">
<h1>Let’s start with the record dataset</h1>
<p>We need to split it into a TRAINING and a TESTING set</p>
<p><strong>AND</strong></p>
<p>we will remove the label and save it.</p>
<p>Finally, we will remove and save the Name of the animal.</p>
<p>While we do this - let’s check data types</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(RecordDF_A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   36 obs. of  8 variables:
 $ name      : Factor w/ 36 levels "bat","bear","cat",..: 5 29 36 1 14 25 15 3 23 17 ...
 $ label     : Factor w/ 4 levels "BIRD","FISH",..: 1 2 3 3 1 1 2 3 1 3 ...
 $ feathers  : Factor w/ 2 levels "no","yes": 2 1 1 1 2 2 1 1 2 1 ...
 $ limbs     : int  2 0 4 4 2 2 0 4 2 4 ...
 $ livebirth : Factor w/ 2 levels "no","yes": 1 1 2 2 1 1 2 2 1 2 ...
 $ canfly    : Factor w/ 2 levels "no","yes": 2 1 1 2 2 2 1 1 1 1 ...
 $ liveswater: Factor w/ 3 levels "no","sometimes",..: 1 3 3 1 1 1 3 1 2 1 ...
 $ blood     : Factor w/ 2 levels "cold","warm": 2 1 2 2 2 2 1 2 2 2 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#RecordDF_A$label&lt;-as.factor(RecordDF_A$label)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We MUST convert the label (called label) into type FACTOR!</p>
<p>If you do not do this, your modeling will not work as well (or at all). I did this above using <code>stringsAsFactors=TRUE</code></p>
<p>Our data is already clean and it is MIXED data. I will not normalize it.</p>
<p>What is mixed data? It is data made up of many data types</p>
<p>However, let’s explore just a little bit to look for BALANCE in the variables AND in the label</p>
<p>!!!!!! We will also need to remove the “name” column</p>
<p>Why??</p>
<section id="simple-tables" class="level2">
<h2 class="anchored" data-anchor-id="simple-tables">Simple tables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(RecordDF_A, <span class="dv">2</span>, table)  <span class="co"># 2 means columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$name

       bat       bear        cat    catfish    chicken  crocodile       deer 
         1          1          1          1          1          1          1 
       dog    dolphin   elephant  flyingcod     garter     geckos      goose 
         1          1          1          1          1          1          1 
     guppy      heron      human     komodo     lizard       opah    ostrich 
         1          1          1          1          1          1          1 
       owl    penguin      perch     pigeon   platypus Pygmyshark     python 
         1          1          1          1          1          1          1 
    salmon   sturgeon       swan      trout    tuatara     turtle       weka 
         1          1          1          1          1          1          1 
     whale 
         1 

$label

   BIRD    FISH  MAMMAL REPTILE 
      9       9      10       8 

$feathers

 no yes 
 27   9 

$limbs

 0  2  4 
11  9 16 

$livebirth

 no yes 
 23  13 

$canfly

 no yes 
 27   9 

$liveswater

       no sometimes       yes 
       19         6        11 

$blood

cold warm 
  16   20 </code></pre>
</div>
</div>
<p><strong>NOTE:</strong> Our data and label are balanced pretty well.</p>
<p>Think about what you see. Are there columns to remove from the data?</p>
<p>Here is a fancy method to use a function to create a bar graph for each variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Define the function on any dataframe input x</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>GoPlot <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  G <span class="ot">&lt;-</span><span class="fu">ggplot</span>(<span class="at">data=</span>RecordDF_A, <span class="fu">aes</span>(.data[[x]], <span class="at">y=</span><span class="st">""</span>) ) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill =</span>.data[[x]])) </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(G)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Use the function in lappy</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="fu">names</span>(RecordDF_A), <span class="cf">function</span>(x) <span class="fu">GoPlot</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[3]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[4]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[5]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[6]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[7]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[8]]</code></pre>
</div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-3-8.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="remove-unwanted-columns" class="level2">
<h2 class="anchored" data-anchor-id="remove-unwanted-columns">Remove unwanted columns</h2>
<p>Next - let’s look at the DF and remove columns we do not want to use in our model</p>
<p>We MUST remove the name column or the model will not be good. Think about why.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## RecordDF_A</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>(AnimalName <span class="ot">&lt;-</span> RecordDF_A<span class="sc">$</span>name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] chicken    salmon     whale      bat        goose      pigeon    
 [7] guppy      cat        penguin    human      platypus   owl       
[13] flyingcod  catfish    dolphin    Pygmyshark komodo     python    
[19] garter     turtle     bear       dog        elephant   deer      
[25] sturgeon   trout      perch      opah       weka       ostrich   
[31] heron      swan       geckos     tuatara    lizard     crocodile 
36 Levels: bat bear cat catfish chicken crocodile deer dog dolphin ... whale</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(RecordDF_A<span class="ot">&lt;-</span>RecordDF_A[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     label feathers limbs livebirth canfly liveswater blood
1     BIRD      yes     2        no    yes         no  warm
2     FISH       no     0        no     no        yes  cold
3   MAMMAL       no     4       yes     no        yes  warm
4   MAMMAL       no     4       yes    yes         no  warm
5     BIRD      yes     2        no    yes         no  warm
6     BIRD      yes     2        no    yes         no  warm
7     FISH       no     0       yes     no        yes  cold
8   MAMMAL       no     4       yes     no         no  warm
9     BIRD      yes     2        no     no  sometimes  warm
10  MAMMAL       no     4       yes     no         no  warm
11  MAMMAL       no     4       yes     no         no  warm
12    BIRD      yes     2        no    yes         no  warm
13    FISH       no     0        no    yes        yes  cold
14    FISH       no     0        no     no        yes  cold
15  MAMMAL       no     4       yes     no        yes  warm
16    FISH       no     0        no     no        yes  cold
17 REPTILE       no     4        no     no         no  cold
18 REPTILE       no     0        no     no  sometimes  cold
19 REPTILE       no     0       yes     no  sometimes  cold
20 REPTILE       no     4        no     no  sometimes  cold
21  MAMMAL       no     4       yes     no         no  warm
22  MAMMAL       no     4       yes     no         no  warm
23  MAMMAL       no     4       yes     no         no  warm
24  MAMMAL       no     4       yes     no         no  warm
25    FISH       no     0        no     no        yes  cold
26    FISH       no     0        no     no        yes  cold
27    FISH       no     0        no     no        yes  warm
28    FISH       no     0        no     no        yes  cold
29    BIRD      yes     2        no    yes         no  warm
30    BIRD      yes     2        no     no         no  warm
31    BIRD      yes     2        no    yes         no  warm
32    BIRD      yes     2        no    yes  sometimes  warm
33 REPTILE       no     4        no     no         no  cold
34 REPTILE       no     4        no     no         no  cold
35 REPTILE       no     4       yes     no         no  cold
36 REPTILE       no     4        no     no  sometimes  cold</code></pre>
</div>
</div>
</section>
<section id="training-and-testing-data" class="level2">
<h2 class="anchored" data-anchor-id="training-and-testing-data">Training and Testing Data</h2>
<p>Next - split into TRAIN and TEST data</p>
<p>!!!! Sampling Matters !!!</p>
<p>In our case, we will use random sampling without replacement.</p>
<p>Why without replacement?</p>
<p>!!!! IMPORTANT - always clean, prepare, etc. <strong>BEFORE</strong> splitting data into train and test. NEVER after.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">DataSize=</span><span class="fu">nrow</span>(RecordDF_A)) <span class="do">## how many rows?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(TrainingSet_Size<span class="ot">&lt;-</span><span class="fu">floor</span>(DataSize<span class="sc">*</span>(<span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>))) <span class="do">## Size for training set</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(TestSet_Size <span class="ot">&lt;-</span> DataSize <span class="sc">-</span> TrainingSet_Size) <span class="do">## Size for testing set</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<p>Random sample WITHOUT replacement (why?)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## set a seed if you want it to be the same each time you</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="do">## run the code. The number (like 1234) does not matter</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="do">## This is the sample of row numbers</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>(MyTrainSample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(RecordDF_A),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>                         TrainingSet_Size,<span class="at">replace=</span><span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 28 16 22  9  5  6 35  4  2  7 34 31 15 14 20 23 29 26  8  3 19 24 13 10 32
[26] 36 18</code></pre>
</div>
</div>
<p>Use the sample of row numbers to grab those rows only from the dataframe….</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(MyTrainingSET <span class="ot">&lt;-</span> RecordDF_A[MyTrainSample,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     label feathers limbs livebirth canfly liveswater blood
28    FISH       no     0        no     no        yes  cold
16    FISH       no     0        no     no        yes  cold
22  MAMMAL       no     4       yes     no         no  warm
9     BIRD      yes     2        no     no  sometimes  warm
5     BIRD      yes     2        no    yes         no  warm
6     BIRD      yes     2        no    yes         no  warm
35 REPTILE       no     4       yes     no         no  cold
4   MAMMAL       no     4       yes    yes         no  warm
2     FISH       no     0        no     no        yes  cold
7     FISH       no     0       yes     no        yes  cold
34 REPTILE       no     4        no     no         no  cold
31    BIRD      yes     2        no    yes         no  warm
15  MAMMAL       no     4       yes     no        yes  warm
14    FISH       no     0        no     no        yes  cold
20 REPTILE       no     4        no     no  sometimes  cold
23  MAMMAL       no     4       yes     no         no  warm
29    BIRD      yes     2        no    yes         no  warm
26    FISH       no     0        no     no        yes  cold
8   MAMMAL       no     4       yes     no         no  warm
3   MAMMAL       no     4       yes     no        yes  warm
19 REPTILE       no     0       yes     no  sometimes  cold
24  MAMMAL       no     4       yes     no         no  warm
13    FISH       no     0        no    yes        yes  cold
10  MAMMAL       no     4       yes     no         no  warm
32    BIRD      yes     2        no    yes  sometimes  warm
36 REPTILE       no     4        no     no  sometimes  cold
18 REPTILE       no     0        no     no  sometimes  cold</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(MyTrainingSET<span class="sc">$</span>label)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   BIRD    FISH  MAMMAL REPTILE 
      6       7       8       6 </code></pre>
</div>
</div>
<p>Use the NOT those row numbers (called <code>-</code>) to get the other row numbers not in the training to use to create the test set.</p>
<p>Training and Testing datasets MUST be disjoint. Why?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(MyTestSET <span class="ot">&lt;-</span> RecordDF_A[<span class="sc">-</span>MyTrainSample,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     label feathers limbs livebirth canfly liveswater blood
1     BIRD      yes     2        no    yes         no  warm
11  MAMMAL       no     4       yes     no         no  warm
12    BIRD      yes     2        no    yes         no  warm
17 REPTILE       no     4        no     no         no  cold
21  MAMMAL       no     4       yes     no         no  warm
25    FISH       no     0        no     no        yes  cold
27    FISH       no     0        no     no        yes  warm
30    BIRD      yes     2        no     no         no  warm
33 REPTILE       no     4        no     no         no  cold</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(MyTestSET<span class="sc">$</span>label)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   BIRD    FISH  MAMMAL REPTILE 
      3       2       2       2 </code></pre>
</div>
</div>
</section>
<section id="make-sure-your-training-and-testing-datasets-are-balanced" class="level2">
<h2 class="anchored" data-anchor-id="make-sure-your-training-and-testing-datasets-are-balanced">Make sure your Training and Testing datasets are BALANCED</h2>
<p>NEXT -REMOVE THE LABELS from the test set!!! - and keep them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(TestKnownLabels <span class="ot">&lt;-</span> MyTestSET<span class="sc">$</span>label)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] BIRD    MAMMAL  BIRD    REPTILE MAMMAL  FISH    FISH    BIRD    REPTILE
Levels: BIRD FISH MAMMAL REPTILE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(MyTestSET <span class="ot">&lt;-</span> MyTestSET[ , <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(MyTestSET) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"label"</span>))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   feathers limbs livebirth canfly liveswater blood
1       yes     2        no    yes         no  warm
11       no     4       yes     no         no  warm
12      yes     2        no    yes         no  warm
17       no     4        no     no         no  cold
21       no     4       yes     no         no  warm
25       no     0        no     no        yes  cold
27       no     0        no     no        yes  warm
30      yes     2        no     no         no  warm
33       no     4        no     no         no  cold</code></pre>
</div>
</div>
</section>
</section>
<section id="decision-trees" class="level1">
<h1>Decision Trees</h1>
<p>First - train the model with your training data</p>
<p>Second - test the model - get predictions - compare to the known labels you have.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>MyTrainingSET</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     label feathers limbs livebirth canfly liveswater blood
28    FISH       no     0        no     no        yes  cold
16    FISH       no     0        no     no        yes  cold
22  MAMMAL       no     4       yes     no         no  warm
9     BIRD      yes     2        no     no  sometimes  warm
5     BIRD      yes     2        no    yes         no  warm
6     BIRD      yes     2        no    yes         no  warm
35 REPTILE       no     4       yes     no         no  cold
4   MAMMAL       no     4       yes    yes         no  warm
2     FISH       no     0        no     no        yes  cold
7     FISH       no     0       yes     no        yes  cold
34 REPTILE       no     4        no     no         no  cold
31    BIRD      yes     2        no    yes         no  warm
15  MAMMAL       no     4       yes     no        yes  warm
14    FISH       no     0        no     no        yes  cold
20 REPTILE       no     4        no     no  sometimes  cold
23  MAMMAL       no     4       yes     no         no  warm
29    BIRD      yes     2        no    yes         no  warm
26    FISH       no     0        no     no        yes  cold
8   MAMMAL       no     4       yes     no         no  warm
3   MAMMAL       no     4       yes     no        yes  warm
19 REPTILE       no     0       yes     no  sometimes  cold
24  MAMMAL       no     4       yes     no         no  warm
13    FISH       no     0        no    yes        yes  cold
10  MAMMAL       no     4       yes     no         no  warm
32    BIRD      yes     2        no    yes  sometimes  warm
36 REPTILE       no     4        no     no  sometimes  cold
18 REPTILE       no     0        no     no  sometimes  cold</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(MyTrainingSET)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   27 obs. of  7 variables:
 $ label     : Factor w/ 4 levels "BIRD","FISH",..: 2 2 3 1 1 1 4 3 2 2 ...
 $ feathers  : Factor w/ 2 levels "no","yes": 1 1 1 2 2 2 1 1 1 1 ...
 $ limbs     : int  0 0 4 2 2 2 4 4 0 0 ...
 $ livebirth : Factor w/ 2 levels "no","yes": 1 1 2 1 1 1 2 2 1 2 ...
 $ canfly    : Factor w/ 2 levels "no","yes": 1 1 1 1 2 2 1 2 1 1 ...
 $ liveswater: Factor w/ 3 levels "no","sometimes",..: 3 3 1 2 1 1 1 1 3 3 ...
 $ blood     : Factor w/ 2 levels "cold","warm": 1 1 2 2 2 2 1 2 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="tree-1" class="level1">
<h1>Tree 1</h1>
<p>This code uses <code>rpart</code> to create decision tree</p>
<p>Here, the <code>~ .</code> means to train using all data variables</p>
<p>The <code>MyTrainingSET$label</code> tells it what the label is called</p>
<p>In this dataset, the label is called “label”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">rpart</span>(MyTrainingSET<span class="sc">$</span>label <span class="sc">~</span> ., <span class="at">data =</span> MyTrainingSET, <span class="at">method=</span><span class="st">"class"</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = MyTrainingSET$label ~ ., data = MyTrainingSET, 
    method = "class")
  n= 27 

         CP nsplit rel error   xerror       xstd
1 0.3684211      0 1.0000000 1.315789 0.07162251
2 0.0100000      1 0.6315789 1.000000 0.12487811

Variable importance
     blood      limbs liveswater   feathers     canfly  livebirth 
        31         21         17         12         10         10 

Node number 1: 27 observations,    complexity param=0.3684211
  predicted class=MAMMAL  expected loss=0.7037037  P(node) =1
    class counts:     6     7     8     6
   probabilities: 0.222 0.259 0.296 0.222 
  left son=2 (14 obs) right son=3 (13 obs)
  Primary splits:
      blood      splits as  RL,    improve=6.829467, (0 missing)
      limbs      &lt; 3 to the left,  improve=5.748148, (0 missing)
      liveswater splits as  RRL,   improve=5.037037, (0 missing)
      livebirth  splits as  LR,    improve=4.920875, (0 missing)
      canfly     splits as  RL,    improve=3.105291, (0 missing)
  Surrogate splits:
      limbs      &lt; 1 to the right, agree=0.852, adj=0.692, (0 split)
      liveswater splits as  LRR,   agree=0.778, adj=0.538, (0 split)
      feathers   splits as  RL,    agree=0.704, adj=0.385, (0 split)
      livebirth  splits as  RL,    agree=0.667, adj=0.308, (0 split)
      canfly     splits as  RL,    agree=0.667, adj=0.308, (0 split)

Node number 2: 14 observations
  predicted class=MAMMAL  expected loss=0.4285714  P(node) =0.5185185
    class counts:     6     0     8     0
   probabilities: 0.429 0.000 0.571 0.000 

Node number 3: 13 observations
  predicted class=FISH    expected loss=0.4615385  P(node) =0.4814815
    class counts:     0     7     0     6
   probabilities: 0.000 0.538 0.000 0.462 </code></pre>
</div>
</div>
</section>
<section id="tree-2-with-cp" class="level1">
<h1>Tree 2 (with <code>cp</code>)</h1>
<p>Let’s make another tree…here we will use <code>cp</code></p>
<p>The smaller <code>cp</code> the larger the tree, if <code>cp</code> is too small you have overfitting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>DT2<span class="ot">&lt;-</span><span class="fu">rpart</span>(MyTrainingSET<span class="sc">$</span>label <span class="sc">~</span> ., <span class="at">data =</span> MyTrainingSET,<span class="at">cp=</span>.<span class="dv">27</span>, <span class="at">method=</span><span class="st">"class"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DT2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = MyTrainingSET$label ~ ., data = MyTrainingSET, 
    method = "class", cp = 0.27)
  n= 27 

         CP nsplit rel error    xerror       xstd
1 0.3684211      0 1.0000000 1.2631579 0.08594701
2 0.2700000      1 0.6315789 0.8421053 0.13437573

Variable importance
     blood      limbs liveswater   feathers     canfly  livebirth 
        31         21         17         12         10         10 

Node number 1: 27 observations,    complexity param=0.3684211
  predicted class=MAMMAL  expected loss=0.7037037  P(node) =1
    class counts:     6     7     8     6
   probabilities: 0.222 0.259 0.296 0.222 
  left son=2 (14 obs) right son=3 (13 obs)
  Primary splits:
      blood      splits as  RL,    improve=6.829467, (0 missing)
      limbs      &lt; 3 to the left,  improve=5.748148, (0 missing)
      liveswater splits as  RRL,   improve=5.037037, (0 missing)
      livebirth  splits as  LR,    improve=4.920875, (0 missing)
      canfly     splits as  RL,    improve=3.105291, (0 missing)
  Surrogate splits:
      limbs      &lt; 1 to the right, agree=0.852, adj=0.692, (0 split)
      liveswater splits as  LRR,   agree=0.778, adj=0.538, (0 split)
      feathers   splits as  RL,    agree=0.704, adj=0.385, (0 split)
      livebirth  splits as  RL,    agree=0.667, adj=0.308, (0 split)
      canfly     splits as  RL,    agree=0.667, adj=0.308, (0 split)

Node number 2: 14 observations
  predicted class=MAMMAL  expected loss=0.4285714  P(node) =0.5185185
    class counts:     6     0     8     0
   probabilities: 0.429 0.000 0.571 0.000 

Node number 3: 13 observations
  predicted class=FISH    expected loss=0.4615385  P(node) =0.4814815
    class counts:     0     7     0     6
   probabilities: 0.000 0.538 0.000 0.462 </code></pre>
</div>
</div>
<section id="cp-plot" class="level2">
<h2 class="anchored" data-anchor-id="cp-plot">cp plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(DT2) <span class="do">## This is the cp plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/plot%20cp-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="tree-3" class="level1">
<h1>Tree 3</h1>
<p>Let’s make a third tree - here we use <code>cp = 0</code> and “information” instead of the default which is GINI</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>DT3<span class="ot">&lt;-</span><span class="fu">rpart</span>(MyTrainingSET<span class="sc">$</span>label <span class="sc">~</span> ., </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> MyTrainingSET,<span class="at">cp=</span><span class="dv">0</span>, <span class="at">method=</span><span class="st">"class"</span>,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">parms =</span> <span class="fu">list</span>(<span class="at">split=</span><span class="st">"information"</span>),<span class="at">minsplit=</span><span class="dv">2</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="do">## The small cp the larger the tree if cp is too small you have overfitting</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DT3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = MyTrainingSET$label ~ ., data = MyTrainingSET, 
    method = "class", parms = list(split = "information"), cp = 0, 
    minsplit = 2)
  n= 27 

         CP nsplit rel error    xerror      xstd
1 0.3684211      0 1.0000000 1.4210526 0.0000000
2 0.3157895      1 0.6315789 0.8947368 0.1320654
3 0.0000000      3 0.0000000 0.0000000 0.0000000

Variable importance
     limbs liveswater      blood     canfly  livebirth   feathers 
        30         23         19         13          8          7 

Node number 1: 27 observations,    complexity param=0.3684211
  predicted class=MAMMAL   expected loss=0.7037037  P(node) =1
    class counts:     6     7     8     6
   probabilities: 0.222 0.259 0.296 0.222 
  left son=2 (14 obs) right son=3 (13 obs)
  Primary splits:
      blood      splits as  RL,    improve=18.69645, (0 missing)
      limbs      &lt; 3 to the left,  improve=14.72888, (0 missing)
      feathers   splits as  RL,    improve=14.30207, (0 missing)
      liveswater splits as  RRL,   improve=12.68720, (0 missing)
      livebirth  splits as  LR,    improve=11.55943, (0 missing)
  Surrogate splits:
      limbs      &lt; 1 to the right, agree=0.852, adj=0.692, (0 split)
      liveswater splits as  LRR,   agree=0.778, adj=0.538, (0 split)
      feathers   splits as  RL,    agree=0.704, adj=0.385, (0 split)
      livebirth  splits as  RL,    agree=0.667, adj=0.308, (0 split)
      canfly     splits as  RL,    agree=0.667, adj=0.308, (0 split)

Node number 2: 14 observations,    complexity param=0.3157895
  predicted class=MAMMAL   expected loss=0.4285714  P(node) =0.5185185
    class counts:     6     0     8     0
   probabilities: 0.429 0.000 0.571 0.000 
  left son=4 (6 obs) right son=5 (8 obs)
  Primary splits:
      limbs      &lt; 3 to the left,  improve=9.560713, (0 missing)
      feathers   splits as  RL,    improve=9.560713, (0 missing)
      livebirth  splits as  LR,    improve=9.560713, (0 missing)
      canfly     splits as  RL,    improve=3.843185, (0 missing)
      liveswater splits as  RLR,   improve=1.922543, (0 missing)
  Surrogate splits:
      canfly     splits as  RL,  agree=0.857, adj=0.667, (0 split)
      liveswater splits as  RLR, agree=0.714, adj=0.333, (0 split)

Node number 3: 13 observations,    complexity param=0.3157895
  predicted class=FISH     expected loss=0.4615385  P(node) =0.4814815
    class counts:     0     7     0     6
   probabilities: 0.000 0.538 0.000 0.462 
  left son=6 (7 obs) right son=7 (6 obs)
  Primary splits:
      liveswater splits as  RRL,   improve=8.9724140, (0 missing)
      limbs      &lt; 2 to the left,  improve=4.2050580, (0 missing)
      canfly     splits as  RL,    improve=0.6546476, (0 missing)
      livebirth  splits as  LR,    improve=0.3327546, (0 missing)
  Surrogate splits:
      limbs     &lt; 2 to the left,  agree=0.846, adj=0.667, (0 split)
      livebirth splits as  LR,    agree=0.615, adj=0.167, (0 split)

Node number 4: 6 observations
  predicted class=BIRD     expected loss=0  P(node) =0.2222222
    class counts:     6     0     0     0
   probabilities: 1.000 0.000 0.000 0.000 

Node number 5: 8 observations
  predicted class=MAMMAL   expected loss=0  P(node) =0.2962963
    class counts:     0     0     8     0
   probabilities: 0.000 0.000 1.000 0.000 

Node number 6: 7 observations
  predicted class=FISH     expected loss=0  P(node) =0.2592593
    class counts:     0     7     0     0
   probabilities: 0.000 1.000 0.000 0.000 

Node number 7: 6 observations
  predicted class=REPTILE  expected loss=0  P(node) =0.2222222
    class counts:     0     0     0     6
   probabilities: 0.000 0.000 0.000 1.000 </code></pre>
</div>
</div>
</section>
<section id="tree-4-less-data" class="level1">
<h1>Tree 4 (less data)</h1>
<p>Let’s make a 4th tree - but here, we will only use SOME of the variables in the dataset to train the model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>DT4<span class="ot">&lt;-</span><span class="fu">rpart</span>(MyTrainingSET<span class="sc">$</span>label <span class="sc">~</span> feathers <span class="sc">+</span> livebirth <span class="sc">+</span> blood, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> MyTrainingSET,<span class="at">cp=</span><span class="dv">0</span>, <span class="at">method=</span><span class="st">"class"</span>,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">parms =</span> <span class="fu">list</span>(<span class="at">split=</span><span class="st">"information"</span>),<span class="at">minsplit=</span><span class="dv">2</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="do">## The small cp the larger the tree if cp is too small you have overfitting</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DT4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = MyTrainingSET$label ~ feathers + livebirth + 
    blood, data = MyTrainingSET, method = "class", parms = list(split = "information"), 
    cp = 0, minsplit = 2)
  n= 27 

          CP nsplit rel error    xerror      xstd
1 0.36842105      0 1.0000000 1.2105263 0.0971535
2 0.31578947      1 0.6315789 0.8421053 0.1343757
3 0.05263158      2 0.3157895 0.4210526 0.1248781
4 0.00000000      3 0.2631579 0.4736842 0.1289205

Variable importance
    blood  feathers livebirth 
       45        40        15 

Node number 1: 27 observations,    complexity param=0.3684211
  predicted class=MAMMAL   expected loss=0.7037037  P(node) =1
    class counts:     6     7     8     6
   probabilities: 0.222 0.259 0.296 0.222 
  left son=2 (14 obs) right son=3 (13 obs)
  Primary splits:
      blood     splits as  RL, improve=18.69645, (0 missing)
      feathers  splits as  RL, improve=14.30207, (0 missing)
      livebirth splits as  LR, improve=11.55943, (0 missing)
  Surrogate splits:
      feathers  splits as  RL, agree=0.704, adj=0.385, (0 split)
      livebirth splits as  RL, agree=0.667, adj=0.308, (0 split)

Node number 2: 14 observations,    complexity param=0.3157895
  predicted class=MAMMAL   expected loss=0.4285714  P(node) =0.5185185
    class counts:     6     0     8     0
   probabilities: 0.429 0.000 0.571 0.000 
  left son=4 (6 obs) right son=5 (8 obs)
  Primary splits:
      feathers  splits as  RL, improve=9.560713, (0 missing)
      livebirth splits as  LR, improve=9.560713, (0 missing)

Node number 3: 13 observations,    complexity param=0.05263158
  predicted class=FISH     expected loss=0.4615385  P(node) =0.4814815
    class counts:     0     7     0     6
   probabilities: 0.000 0.538 0.000 0.462 
  left son=6 (10 obs) right son=7 (3 obs)
  Primary splits:
      livebirth splits as  LR, improve=0.3327546, (0 missing)

Node number 4: 6 observations
  predicted class=BIRD     expected loss=0  P(node) =0.2222222
    class counts:     6     0     0     0
   probabilities: 1.000 0.000 0.000 0.000 

Node number 5: 8 observations
  predicted class=MAMMAL   expected loss=0  P(node) =0.2962963
    class counts:     0     0     8     0
   probabilities: 0.000 0.000 1.000 0.000 

Node number 6: 10 observations
  predicted class=FISH     expected loss=0.4  P(node) =0.3703704
    class counts:     0     6     0     4
   probabilities: 0.000 0.600 0.000 0.400 

Node number 7: 3 observations
  predicted class=REPTILE  expected loss=0.3333333  P(node) =0.1111111
    class counts:     0     1     0     2
   probabilities: 0.000 0.333 0.000 0.667 </code></pre>
</div>
</div>
</section>
<section id="extra-notes-about-the-outputsummary" class="level1">
<h1>Extra notes about the output/summary</h1>
<ul>
<li>Root Node Error x (X Error) is the cross-validated error rate, which is a more objective measure of predictive accuracy</li>
<li>Root Node Error x (Rel Error) is the resubstitution error rate (the error rate computed on the training sample).</li>
</ul>
<p><strong>Variable Importance:</strong> The values are calculate by summing up all the improvement measures that each variable contributes</p>
<p><strong>RE:</strong> the sum of the goodness of split measures for each split for which it was the primary variable</p>
<p>in Summary, the variable importance sums to 100</p>
<section id="variable-importance" class="level2">
<h2 class="anchored" data-anchor-id="variable-importance">Variable importance</h2>
<p>NOTE: <code>variable.importance</code> is a named numeric vector giving the importance of each variable. (Only present if there are any splits.)</p>
<p>When printed by <code>summary.rpart</code> these are rescaled to add to 100.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>DT3<span class="sc">$</span>variable.importance  <span class="do">## before re-eval to add to 100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     limbs liveswater      blood     canfly  livebirth   feathers 
 28.486020  22.226638  18.696451  12.126563   7.248156   7.190943 </code></pre>
</div>
</div>
</section>
</section>
<section id="predict-the-testset-using-all-4-trees--" class="level1">
<h1>Predict the Testset using all 4 trees -</h1>
<p>Let’s see what we get.</p>
<p>We will build a tree and a confusion matrix for all 4 ## DT</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">DT_Prediction=</span> <span class="fu">predict</span>(DT, MyTestSET, <span class="at">type=</span><span class="st">"class"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1     11     12     17     21     25     27     30     33 
MAMMAL MAMMAL MAMMAL   FISH MAMMAL   FISH MAMMAL MAMMAL   FISH 
Levels: BIRD FISH MAMMAL REPTILE</code></pre>
</div>
</div>
<section id="confusion-matrix" class="level3">
<h3 class="anchored" data-anchor-id="confusion-matrix">Confusion Matrix</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(DT_Prediction,TestKnownLabels) <span class="do">## one way to make a confu mat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             TestKnownLabels
DT_Prediction BIRD FISH MAMMAL REPTILE
      BIRD       0    0      0       0
      FISH       0    1      0       2
      MAMMAL     3    1      2       0
      REPTILE    0    0      0       0</code></pre>
</div>
</div>
</section>
<section id="vis" class="level3">
<h3 class="anchored" data-anchor-id="vis">VIS</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fancyRpartPlot</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="dt2" class="level2">
<h2 class="anchored" data-anchor-id="dt2">DT2</h2>
<p>Example two with cp - a lower cp value is a bigger tree</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">DT_Prediction2=</span> <span class="fu">predict</span>(DT2, MyTestSET, <span class="at">type =</span> <span class="st">"class"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1     11     12     17     21     25     27     30     33 
MAMMAL MAMMAL MAMMAL   FISH MAMMAL   FISH MAMMAL MAMMAL   FISH 
Levels: BIRD FISH MAMMAL REPTILE</code></pre>
</div>
</div>
</section>
<section id="another-way-to-make-a-confusion-matrix" class="level2">
<h2 class="anchored" data-anchor-id="another-way-to-make-a-confusion-matrix">ANother way to make a confusion matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(DT_Prediction2, TestKnownLabels, <span class="at">positive=</span><span class="st">"true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction BIRD FISH MAMMAL REPTILE
   BIRD       0    0      0       0
   FISH       0    1      0       2
   MAMMAL     3    1      2       0
   REPTILE    0    0      0       0

Overall Statistics
                                          
               Accuracy : 0.3333          
                 95% CI : (0.0749, 0.7007)
    No Information Rate : 0.3333          
    P-Value [Acc &gt; NIR] : 0.6228          
                                          
                  Kappa : 0.1429          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: BIRD Class: FISH Class: MAMMAL Class: REPTILE
Sensitivity               0.0000      0.5000        1.0000         0.0000
Specificity               1.0000      0.7143        0.4286         1.0000
Pos Pred Value               NaN      0.3333        0.3333            NaN
Neg Pred Value            0.6667      0.8333        1.0000         0.7778
Prevalence                0.3333      0.2222        0.2222         0.2222
Detection Rate            0.0000      0.1111        0.2222         0.0000
Detection Prevalence      0.0000      0.3333        0.6667         0.0000
Balanced Accuracy         0.5000      0.6071        0.7143         0.5000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fancyRpartPlot</span>(DT2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/confusion%20matrix2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="dt3" class="level2">
<h2 class="anchored" data-anchor-id="dt3">DT3</h2>
<p>Example three with information gain and lower cp</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">DT_Prediction3=</span> <span class="fu">predict</span>(DT3, MyTestSET, <span class="at">type =</span> <span class="st">"class"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      1      11      12      17      21      25      27      30      33 
   BIRD  MAMMAL    BIRD REPTILE  MAMMAL    FISH    BIRD    BIRD REPTILE 
Levels: BIRD FISH MAMMAL REPTILE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(DT_Prediction3, TestKnownLabels, <span class="at">positive=</span><span class="st">"true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction BIRD FISH MAMMAL REPTILE
   BIRD       3    1      0       0
   FISH       0    1      0       0
   MAMMAL     0    0      2       0
   REPTILE    0    0      0       2

Overall Statistics
                                          
               Accuracy : 0.8889          
                 95% CI : (0.5175, 0.9972)
    No Information Rate : 0.3333          
    P-Value [Acc &gt; NIR] : 0.0009653       
                                          
                  Kappa : 0.8475          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: BIRD Class: FISH Class: MAMMAL Class: REPTILE
Sensitivity               1.0000      0.5000        1.0000         1.0000
Specificity               0.8333      1.0000        1.0000         1.0000
Pos Pred Value            0.7500      1.0000        1.0000         1.0000
Neg Pred Value            1.0000      0.8750        1.0000         1.0000
Prevalence                0.3333      0.2222        0.2222         0.2222
Detection Rate            0.3333      0.1111        0.2222         0.2222
Detection Prevalence      0.4444      0.1111        0.2222         0.2222
Balanced Accuracy         0.9167      0.7500        1.0000         1.0000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>rattle<span class="sc">::</span><span class="fu">fancyRpartPlot</span>(DT3,<span class="at">main=</span><span class="st">"Decision Tree"</span>, <span class="at">cex=</span>.<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/DT3%20prediction-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="dt4" class="level2">
<h2 class="anchored" data-anchor-id="dt4">DT4</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">DT_Prediction4=</span> <span class="fu">predict</span>(DT4, MyTestSET, <span class="at">type =</span> <span class="st">"class"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1     11     12     17     21     25     27     30     33 
  BIRD MAMMAL   BIRD   FISH MAMMAL   FISH MAMMAL   BIRD   FISH 
Levels: BIRD FISH MAMMAL REPTILE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(DT_Prediction4, TestKnownLabels, <span class="at">positive=</span><span class="st">"true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction BIRD FISH MAMMAL REPTILE
   BIRD       3    0      0       0
   FISH       0    1      0       2
   MAMMAL     0    1      2       0
   REPTILE    0    0      0       0

Overall Statistics
                                          
               Accuracy : 0.6667          
                 95% CI : (0.2993, 0.9251)
    No Information Rate : 0.3333          
    P-Value [Acc &gt; NIR] : 0.04242         
                                          
                  Kappa : 0.55            
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: BIRD Class: FISH Class: MAMMAL Class: REPTILE
Sensitivity               1.0000      0.5000        1.0000         0.0000
Specificity               1.0000      0.7143        0.8571         1.0000
Pos Pred Value            1.0000      0.3333        0.6667            NaN
Neg Pred Value            1.0000      0.8333        1.0000         0.7778
Prevalence                0.3333      0.2222        0.2222         0.2222
Detection Rate            0.3333      0.1111        0.2222         0.0000
Detection Prevalence      0.3333      0.3333        0.3333         0.0000
Balanced Accuracy         1.0000      0.6071        0.9286         0.5000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>rattle<span class="sc">::</span><span class="fu">fancyRpartPlot</span>(DT4,<span class="at">main=</span><span class="st">"Decision Tree"</span>, <span class="at">cex=</span>.<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-DecisionTrees-Ex1_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="notes-on-cross-validation" class="level1">
<h1>NOTES (on cross-validation):</h1>
<p>In this code, we only created one training and one testing set</p>
<p>If we repeat the above process fully for a different training and testing set - and if we do that say 5 times it is called 5-fold cross validation.</p>
<section id="read-more-about-cross-validation" class="level2">
<h2 class="anchored" data-anchor-id="read-more-about-cross-validation">READ MORE about cross-validation:</h2>
<ol type="1">
<li><a href="http://inferate.blogspot.com/2015/05/k-fold-cross-validation-with-decision.html" class="uri">http://inferate.blogspot.com/2015/05/k-fold-cross-validation-with-decision.html</a></li>
<li>This one is mathy and complicated for those who are interested: <a href="https://rafalab.github.io/dsbook/cross-validation.html" class="uri">https://rafalab.github.io/dsbook/cross-validation.html</a></li>
<li>I like this one: <a href="https://www.kaggle.com/satishgunjal/tutorial-k-fold-cross-validation" class="uri">https://www.kaggle.com/satishgunjal/tutorial-k-fold-cross-validation</a></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>